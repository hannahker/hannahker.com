<!doctype html><html><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="chrome=1"><meta name=HandheldFriendly content="True"><meta name=MobileOptimized content="320"><meta name=viewport content="width=device-width,initial-scale=1"><meta name=referrer content="no-referrer"><meta name=description content="A new Hugo site."><title>Using SVR to predict travel times in London - Hannah Ker</title><link rel="shortcut icon" href=/%20><link rel=stylesheet href=/sass/style.sass integrity crossorigin=anonymous media=screen><link rel=stylesheet href="https://fonts.googleapis.com/css?family=Didact+Gothic"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://hannahker.com/research/predict-small.png"><meta name=twitter:title content="Using SVR to predict travel times in London"><meta name=twitter:description content="Overview&nbsp;¶ Using data collected from London&rsquo;s ANPR camera system, I built and trained a machine learning model to predict travel times across 22 road links in central London.
The data&nbsp;¶ This data was collected as part of the London Congestion Analysis Project and provides travel times (in sec/meter), aggregated at 5 min intervals for road links throughout London. This data was collected between January 1st, 2011 and January 30th, 2011 and includes observations between 6am-9pm for each day."><meta property="og:title" content="Using SVR to predict travel times in London"><meta property="og:description" content="Overview&nbsp;¶ Using data collected from London&rsquo;s ANPR camera system, I built and trained a machine learning model to predict travel times across 22 road links in central London.
The data&nbsp;¶ This data was collected as part of the London Congestion Analysis Project and provides travel times (in sec/meter), aggregated at 5 min intervals for road links throughout London. This data was collected between January 1st, 2011 and January 30th, 2011 and includes observations between 6am-9pm for each day."><meta property="og:type" content="article"><meta property="og:url" content="https://hannahker.com/research/traffic/"><meta property="og:image" content="https://hannahker.com/research/predict-small.png"><meta property="og:image" content="https://hannahker.com/research/selected_links_v2.png"><meta property="og:image" content="https://hannahker.com/research/predict.png"><meta property="og:image" content="https://hannahker.com/research/traffic.png"><meta property="og:image" content="https://hannahker.com/research/mape_results.png"><meta property="article:section" content="research"><meta property="article:published_time" content="2019-03-19T12:41:46-05:00"><meta property="article:modified_time" content="2019-03-19T12:41:46-05:00"><meta property="og:site_name" content="Hannah Ker"><title>Using SVR to predict travel times in London</title></head><body><header class="wrap flex-container"><h1>Using SVR to predict travel times in London</h1></header><main class=wrap><article role=article class=flex-container><p><p style=text-align:center><img src=/research/predict.png alt></p></p><h3 id=overview class=anchor-link><a href=#overview>Overview<span class=pilcrow>&nbsp;¶</span></a></h3><p>Using data collected from London&rsquo;s ANPR camera system, I built and trained a machine learning model to predict travel times across 22 road links in central London.</p><h3 id=the-data class=anchor-link><a href=#the-data>The data<span class=pilcrow>&nbsp;¶</span></a></h3><p>This data was collected as part of the <a href=http://standard.cege.ucl.ac.uk/workshops/data.html>London Congestion Analysis Project</a> and provides travel times (in sec/meter), aggregated at 5 min intervals for road links throughout London. This data was collected between January 1st, 2011 and January 30th, 2011 and includes observations between 6am-9pm for each day. I focused my analysis by selecting a subset of 22 road links, as shown in the map below.</p><p><p style=text-align:center><img src=/research/selected_links_v2.png alt></p></p><h3 id=modelling-data-with-spatial-and-temporal-dependencies class=anchor-link><a href=#modelling-data-with-spatial-and-temporal-dependencies>Modelling data with spatial and temporal dependencies<span class=pilcrow>&nbsp;¶</span></a></h3><p>Traffic data is complex. As traffic is measured across both spatial and temporal dimensions, we need to consider the effects of spatial and temporal autocorrelation.<sup id=fnref:1><a href=#fn:1 class=footnote-ref role=doc-noteref>1</a></sup> That is, two traffic speed measurements are more likely to be similar to each other if they are closer in space and time. Many traditional statistical and machine learning methods are not designed to handle these effects, and so accurate predictions can be challenging.</p><p>To address this challenge, we need to first explore our data to understand its spatial and temporal patterns. <a href=https://mgimond.github.io/Spatial/spatial-autocorrelation.html>Moran’s I</a> is a useful measure of local spatial autocorrelation, indicating how each observation is correlated with its neighbours. We can also create <a href=https://towardsdatascience.com/significance-of-acf-and-pacf-plots-in-time-series-analysis-2fa11a5d10a8>ACF and PACF plots</a> to understand how each observation is correlated with its past observations.</p><h3 id=methods class=anchor-link><a href=#methods>Methods<span class=pilcrow>&nbsp;¶</span></a></h3><p>Given its past applications in time series modelling and traffic predictions<sup id=fnref:2><a href=#fn:2 class=footnote-ref role=doc-noteref>2</a></sup>,<sup id=fnref:3><a href=#fn:3 class=footnote-ref role=doc-noteref>3</a></sup> I used support vector regression (SVR) to create my model.</p><p>Support vector regression (SVR) is an adapted version of the popular support vector machine (SVM) model, that is used to solve regression, rather than classification problems. Both SVR and SVM are kernel methods. Generally speaking, kernel methods function in two steps.<sup id=fnref:4><a href=#fn:4 class=footnote-ref role=doc-noteref>4</a></sup> Firstly, a function is applied to map the data into a high dimensional feature space. Then, a learning algorithm is applied to find linear patterns in this feature space.<sup id=fnref1:4><a href=#fn:4 class=footnote-ref role=doc-noteref>4</a></sup> Well-established linear algorithms (eg. OLS regression) can thus be applied so solve nonlinear problems.</p><p>I used the <a href=https://cran.r-project.org/web/packages/caret/vignettes/caret.html>caret</a> package in R to develop the SVR model and use the <a href=https://www.rdocumentation.org/packages/MLmetrics/versions/1.1.1>MLmetrics</a> package to calculate metrics to evaluate its performance. Given the results from our data exploration, we built a model that incorporated 3 time lags (ie. the past three observations) to predict the next time step. As I identified statistically significant spatial autocorrelation (as identified by a Moran&rsquo;s I test), I tested models that included information from spatially adjacent links, but found that this increased training time and did not significantly improve model accuracy.</p><p>I then split the data into training and testing sets, encompassing 16 days of observations and 7 days of observations, respectively. Using the testing set, I used a grid search approach to tune the hyperparameters for the SVR model. These hyperparameters control factors such as the model&rsquo;s sensitivity to error and the bandwidth for the kernel function that this model is based on (RBF kernel, in this case). For greater efficiency, I only tuned the hyperparameters based on the data from a single road link (rather than for all 22). Using the optimal combination of hyperparameters, I created an SVR model and applied it to the testing data for all road links to make travel time predictions.</p><h3 id=results class=anchor-link><a href=#results>Results<span class=pilcrow>&nbsp;¶</span></a></h3><p>The figure at the top of this post gives an example of the actual travel times in the dataset, compared with the travel times predicted by my model. When looking at this model&rsquo;s error (as measured by MAPE), according to the figure below, we can see that this SVR traffic prediction model performs competitively against other state-of-the-art approaches, such as STARIMA (a spatio-temporal extension of the traditional ARIMA time series model), and long short-term memory (a deep learning approach). These other models were created by other students in my course, with the same data.</p><p><p style=text-align:center><img src=/research/mape_results.png alt></p></p><p>Admittedly, this model may be of limited utility, as travel time predictions are only made 5 minutes in the future. Nonetheless, it is an interesting exercise in exploring different approaches for building predictive models that are somewhat robust to underlying spatial and temporal dependencies in the data.</p><div class=footnotes role=doc-endnotes><hr><ol><li id=fn:1><p>Cheng, T., Haworth, J., Wang, J., 2011a. Spatio-Temporal Autocorrelation of Road Network Data. J. Geogr. Syst. 14, 1–25. <a href=https://doi.org/10.1007/s10109-011-0149-5>https://doi.org/10.1007/s10109-011-0149-5</a>&#160;<a href=#fnref:1 class=footnote-backref role=doc-backlink>&#8617;&#xfe0e;</a></p></li><li id=fn:2><p>Müller, K.-R., Smola, A.J., Rätsch, G., Schökopf, B., Kohlmorgen, J., Vapnik, V., 1999. Using support vector machines for time series prediction, in: Advances in Kernel Methods: Support Vector Learning. MIT Press, Cambridge, MA, USA, pp. 243–253.&#160;<a href=#fnref:2 class=footnote-backref role=doc-backlink>&#8617;&#xfe0e;</a></p></li><li id=fn:3><p>Wu, C.-H., Ho, J.-M., Lee, D.T., 2004. Travel-time prediction with support vector regression. IEEE Trans. Intell. Transp. Syst. 5, 276–281. <a href=https://doi.org/10.1109/TITS.2004.837813>https://doi.org/10.1109/TITS.2004.837813</a>&#160;<a href=#fnref:3 class=footnote-backref role=doc-backlink>&#8617;&#xfe0e;</a></p></li><li id=fn:4><p>Shawe-Taylor, D. of C.S.R.H.J., Shawe-Taylor, J., Cristianini, N., 2004. Kernel Methods for Pattern Analysis. Cambridge University Press.&#160;<a href=#fnref:4 class=footnote-backref role=doc-backlink>&#8617;&#xfe0e;</a>&#160;<a href=#fnref1:4 class=footnote-backref role=doc-backlink>&#8617;&#xfe0e;</a></p></li></ol></div></article><nav role=navigation class="flex-container bottom-menu"><hr><p><a href=/about>hi, i'm hannah</a>
&#183;
<a href=/posts>cartography</a>
&#183;
<a href=/research>research</a>
&#183;
<a href=/>main</a></p></nav></main><footer class="flex-container footer">Hannah Ker</footer></body></html>